```{r}
#| echo: FALSE
#| message: FALSE

library(tidyverse)

contador_ejemplos <- 0
```

# 2. Variable Aleatoria

## Introducci贸n

Un basquetbolista tiene una tasa de encestos del 60%. Esto implica que en un tiro al aro tiene un 60% de probabilidad de encestar y un 40% de fallar. 驴Cu谩l es la probabilidad de que deba lanzar dos veces para eventualmente encestar? Suponiendo que los tiros son independientes entre s铆, la probabilidad de fallar el primer tiro y acertar el segundo es $0,4 \times 0,6 = 0,24$. 驴Cu谩l es la probabilidad de que deba lanzar tres veces para finalmente encestar? Siguiendo la misma l贸gica obtenemos $0,4 \times 0,4 \times 0,6 = 0,096$.

Podr铆amos seguir este procedimiento infinitamente: para cualquier n煤mero natural $n$ es posible calcular la probabilidad de que el basquetbolista falle los primeros $n-1$ tiros y finalmente enceste el 煤ltimo. De hecho, definiendo la variable

$$X: \text{ n煤mero de tiros que realiza el basquetbolista hasta encestar}$$

es f谩cil ver que la probabilidad de encestar en el $n$-茅simo tiro est谩 dada por

$$P(X = n) = (0,4)^{n-1} \times 0,6 \qquad \forall \quad n \in \mathbb{N}.$$

Esta ecuaci贸n comprime de forma eficiente la informaci贸n necesaria para calcular la chance de ocurrencia de cualquier resultado posible. De no tenerla, tendr铆amos que definir un evento para cada resultado.

-   $A$: el basquetbolista encesta al primer tiro $\implies A = \{(Si)\}$
-   $B$: el basquetbolista encesta al segundo tiro $\implies B = \{(No, Si)\}$
-   $C$: el basquetbolista encesta al tercer tiro $\implies C = \{(No, No, Si)\}$

$\cdots$

Es por ello que surgen las variables aleatorias.

## Variable aleatoria

Sup贸ngase un experimento aleatorio sobre el que se define un espacio muestral $S$. Se llama **variable aleatoria** a la funci贸n $X$ que asigna a cada uno de los elementos $s \in S$ un n煤mero real $X(s)$.

En el ejemplo introductorio, el experimento aleatorio es "lanzar al aro hasta encestar" y el espacio muestral es $S=${(S铆), (No, S铆), (No, No, S铆), $\cdots$}. Bajo la definici贸n ya dada para la variable aleatoria $X$, esta funci贸n no hace m谩s que contar el n煤mero de tiros en cada resultado:

$$s = (Si) \implies X(s) = 1$$ $$s = (No, Si) \implies X(s) = 2$$ $$s = (No, No, Si) \implies X(s) = 3$$

::: callout-note
#### Nota

En el ejemplo introductorio se define $X$ como el "n煤mero de tiros hasta encestar". N贸tese la diferencia entre una variable aleatoria y un evento aleatorio. El *evento* suele escribirse como una afirmaci贸n, vali茅ndose de un verbo (por ejemplo, "el dado arrojado **resulta** en un n煤mero par"). Como tal, un evento s贸lo admite dos resultados posibles: ocurrir o no ocurrir. En cambio, una *variable* es un atributo, el cual puede tomar m煤ltiples valores.
:::

Como a cada elemento del espacio muestral le corresponde un n煤mero real, es sensato preguntarse cu谩les son todos los posibles n煤meros reales que podr铆an obtenerse en un cierto experimento. Dicho de otro modo, podr铆amos preguntarnos cu谩les son todos los valores que puede tomar la variable $X$. Este conjunto se conoce como **recorrido** de $X$ y se simboliza con $R_X$.

$$R_X = \{x \in \mathbb{R} : X(s) = x \;;\; s \in S\}$$

Por ejemplo, para un experimento con s贸lo tres resultados posibles se tiene $S=\{s_1, s_2 ,s_3\}$ y por lo tanto $R_X = \{X(s_1), X(s_2), X(s_3)\}$. En el ejemplo del basquetbolista se tiene que $R_X = \mathbb{N}$, o sea que el n煤mero de tiros hasta encestar puede ser cualquier n煤mero natural. Algo interesante de este 煤ltimo caso es que el conjunto tiene infinitos elementos. En general, $R_X$ puede ser un conjunto:

* finito.
* infinito numerable.[^2_va-1]
* infinito no numerable.

[^2_va-1]: Algunos conjuntos infinitos permiten enumerar todos sus elementos, como sucede por ejemplo para el caso de los n煤meros naturales: $\mathbb{N} = \{1, 2, 3, \cdots\}$. Estos son ejemplos de infinitos numerables. Existen otros conjuntos infinitos, sin embargo, que no permiten tal enumeraci贸n. Un claro ejemplo son los n煤meros reales ($\mathbb{R}$).

::: callout-warning
#### Advertencia

El tama帽o de $S$ no siempre es igual al tama帽o de $R_X$. T贸mese como ejemplo el experimento de arrojar dos monedas al aire en simult谩neo. El espacio muestral tiene cuatro elementos, porque $S=\{(C,C), (C,X), (X,C), (X,X)\}$, pero si definimos una variable aletoria $X$ que cuenta el n煤mero de cruces, se tiene que $R_X = \{0, 1, 2\}$. Esto es porque se tienen dos resultados del espacio muestral que bajo la funci贸n $X$ devuelven el mismo n煤mero real.
:::

## Tipos de variable aleatoria

Seg煤n la cardinalidad del recorrido de $X$ (es decir, seg煤n si $R_X$ es un conjunto finito, infinito numerable o infinito no numerable), una variable aleatoria puede clasificarse en uno de dos tipos: discreta o continua.

### Variable aleatoria discreta

Sea $X$ una v.a.[^2_va-2] definida sobre un espacio muestral $S$. Se dice que $X$ es una **variable aleatoria discreta** si su recorrido es un conjunto finito o infinito numerable.

[^2_va-2]: Por comodidad, en ocasiones adoptamos esta forma de abreviar "variable aleatoria".

Ejemplos de variables aleatorias discretas son los siguientes:

* Demanda de un cierto producto.
* N煤mero de aces en un partido de tenis.
* Cantidad de senadores que votan en contra de una ley.
* N煤mero de ventas anuales en Amazon.

Supongamos un recorrido $R_X = \{x_1, x_2, x_3, \cdots\}$ a lo sumo numerable. Para cada resultado posible $x_i$ puede asociarse un n煤mero $p(x_i) = P(X = x_i)$. Esta funci贸n es denominada **funci贸n de probabilidad puntual** de $X$.

La funci贸n $p(x)$ verifica dos propiedades importantes:

  1. $p(x) > 0 \quad \forall \quad x \in R_X$ (condici贸n de positividad)
  2. $\sum_{x \in R_X} p(x) = 1$ (condici贸n de cierre)

::: {.examplebox data-latex=""}
```{r}
#| echo: FALSE
contador_ejemplos <- contador_ejemplos + 1
```

::: {.center data-latex=""}
**Ejemplo `r contador_ejemplos`**
:::

Se arrojan 3 monedas equilibradas al aire y se registra para cada una si el resultado es cara o cruz. Sea $X$ la variable que registra el n煤mero de cruces obtenidas. Definir su funci贸n de probabilidad.

**Soluci贸n:**

* **Experimento aleatorio:** arrojar 3 monedas al aire y registrar la cara superior de cada una.
* **Espacio muestral:** $S = \{CCC, CCX, CXC, CXX, XCC, XCX, XXC, XXX\}$.
* **Ejemplo de resultado:** $s = CCX$.
* **Variable aleatoria:** $X$: n煤mero de cruces obtenidas.
* **Recorrido:** $R_X = \{0, 1, 2, 3\} \implies \#R_X = 4$ (finito).

La funci贸n de probabilidad surge de las siguientes probabilidades:

* $p(0) = P(X = 0) = P(s \in \{CCC\}) = \frac{1}{8}$
* $p(1) = P(X = 1) = P(s \in \{CCX, CXC, XCC\}) = \frac{3}{8}$
* $p(2) = P(X = 2) = P(s \in \{XXC, XCX, CXX\}) = \frac{3}{8}$
* $p(3) = P(X = 3) = P(s \in \{XXX\}) = \frac{1}{8}$

N贸tese que se verifican tanto la condici贸n de positividad como la de cierre:

1. Positividad: $\frac{3}{8} > \frac{1}{8} > 0$ (todos los resultados son positivos)
2. Cierre: $\frac{1}{8} + \frac{3}{8} + \frac{3}{8} + \frac{1}{8} = \frac{8}{8} = 1$
:::

Al conjunto de pares $(x, p(x))$ se lo llama **distribuci贸n de probabilidad** de la v.a. $X$, denotada como $X \sim p(x)$[^2_va-3]. Para una v.a. discreta existen tres formas de representar su distribuci贸n de probabilidad: como tabla, como gr谩fico o como f贸rmula.

[^2_va-3]: Se lee "$X$ se distribuye como una $p(x)$".

![Las tres formas de representar la distribuci贸n de probabilidad de una variable aleatoria discreta.](img/distrib_prob.png){#fig-distrib_prob}

### Variable aleatoria continua

Sea $X$ una v.a. definida sobre un espacio muestral $S$. Se dice que $X$ es una **variable aleatoria continua** si su recorrido es un conjunto infinito no numerable.

Ejemplos de variables aleatorias continuas son los siguientes:

* Producto Bruto Interno.
* Duraci贸n del vuelo AR1300 (EZE-JFK), en minutos.
* Valor del d贸lar en relaci贸n al precio argentino.

::: callout-note
#### Nota

Ante una variable aleatoria continua ya no podemos hablar de $x_i$, visto que no existe un $i$-茅simo valor de la variable.
:::

Para toda v.a. continua $X$ se tiene que $P(X=x) = 0$. Es decir que las probabilidades puntuales son todas nulas. En su lugar, conviene estudiar la probabilidad de que $X$ tome un valor en un entorno de $x$, lo cual se logra con una funci贸n particular.

Se denomina **funci贸n de densidad de probabilidad** de $X$ a aquella funci贸n $f(x)$ que verifica:

1. $f(x)>0 \quad \forall \quad x \in R_X$ (condici贸n de positividad)
2. $\int_{R_X} f(x) \; dx = 1$ (condici贸n de cierre)

::: {.examplebox data-latex=""}
```{r}
#| echo: FALSE
contador_ejemplos <- contador_ejemplos + 1
```

::: {.center data-latex=""}
**Ejemplo `r contador_ejemplos`**
:::

Una empresa l谩ctea vende sachets de yogur de un litro. La m谩quina que llena los envases no funciona a la perfecci贸n, por lo que el verdadero contenido de yogur puede variar entre envases. Se sabe que la variable ``litros de yogur en un sachet'' (llam茅mosla $X$) se distribuye siguiendo la funci贸n de densidad a continuaci贸n:
$$f(x) = K(4x - x^2) \qquad \forall \quad 0<x<2$$
驴Cu谩l es el valor del n煤mero real $K$?

**Soluci贸n:**

* **Experimento aleatorio:** usar la m谩quina para llenar un sachet de yogur.
* **Variable aleatoria:** $X$: litros de yogur en un sachet.
* **Recorrido:** $R_X = [0, 2] \subset \mathbb{R}$ (infinito no numerable).

Por condici贸n de cierre:
$$\int_0^2 K(4x-2x^2) \; dx = K(2x^2 - \tfrac{2}{3}x^3) |_0^2 = K(8 - \tfrac{16}{3}) = \tfrac{8}{3} \implies K = \tfrac{3}{8}$$
:::

## Funci贸n de distribuci贸n

Sea $X$ una v.a. cualquiera (discreta o continua), llamamos **funci贸n de distribuci贸n acumulada** de $X$ a la funci贸n: $$F(x) = P(X \leq x) \quad \forall \quad x \in \mathbb{R}.$$

Esta definici贸n puede particularizarse para cada tipo de variable aleatoria:

* Discreta: $F(x) = \sum_{x_i \leq x} p(x_i)$
* Continua: $F(x) = \int_{-\infty}^x f(t) \; dt$

![Representaciones gr谩ficas de funciones de distribuci贸n para una variable discreta (izquierda) y una continua (derecha).](img/fc_distrib.png){#fig-fc_distrib}

La funci贸n de distribuci贸n acumulada goza de tres propiedades:

* Es mon贸tona no decreciente: $x_1 < x_2 \implies F(x_1) \leq F(x_2)$
* Est谩 acotada entre 0 y 1: $\lim_{x \to -\infty} F(x) = 0$ y $\lim_{x \to +\infty} F(x) = 1$
* Es continua por derecha: $\lim_{x \to x_0^+} F(x) = F(x_0)$

## Esperanza y variancia

### Esperanza

Definiremos la esperanza por separado para cada tipo de variable aleatoria.

**Caso discreto:** Sea $X$ una v.a. discreta con funci贸n de probabilidad $p(x)$, se define la **esperanza** (o valor esperado) de $X$ como: $$E(X) = \sum_{x_i \in R_X} x_i \cdot p(x_i)$$

**Caso continuo:** Sea $X$ una v.a. continua con funci贸n de densidad $f(x)$, se define la **esperanza** de $X$ como: $$E(X) = \int_{R_X} x \cdot f(x) \; dx$$

Se hacen las siguientes observaciones sobre la esperanza:

* La esperanza puede no existir. La condici贸n para su existencia es la convergencia de la serie (en el caso discreto) o de la integral impropia (en el caso continuo).
* Si $R_X$ es finito, la esperanza de $X$ se obtiene como una suma finita y por lo tanto existe \textit{siempre}.
* La esperanza representa el "centro de gravedad" de la distribuci贸n de probabilidad.
* La esperanza es un par谩metro; no debe confundirse con el concepto de promedio o media aritm茅tica.

### Variancia

Nuevamente, se establece una definici贸n para cada tipo de variable aleatoria.

**Caso discreto:** Sea $X$ una v.a. discreta con funci贸n de probabilidad $p(x)$, se define la **variancia** de $X$ como: $$V(X) = \sum_{x_i \in R_X} [x_i - E(X)]^2 \cdot p(x_i)$$

**Caso continuo:** Sea $X$ una v.a. continua con funci贸n de densidad $f(x)$, se define la **variancia** de $X$ como: $$V(X) = \int_{R_X} [x-E(X)]^2 \cdot f(x) \; dx$$

La definici贸n de $V(X)$ es equivalente a una expresi贸n m谩s sencilla de calcular, que frecuentemente se utiliza en la pr谩ctica para simplificar los c谩lculos: la *f贸rmula de trabajo* de $V(X)$. $$V(X) = E(X^2) - [E(X)]^2 = E(X^2) - E^2(X)$$

::: {.examplebox data-latex=""}
```{r}
#| echo: FALSE
contador_ejemplos <- contador_ejemplos + 1
```

::: {.center data-latex=""}
**Ejemplo `r contador_ejemplos`**
:::

Calcular la Esperanza y Variancia para la variable aleatoria definida en el Ejemplo 1.

**Soluci贸n:** lo vemos en clase. 
:::

### Propiedades de E(X) y V(X)

Se cumplen las siguientes propiedades para la Esperanza y Variancia de una variable aleatoria.

Esperanza:

* $X=c$ con prob. 1 $\implies E(X) = c$
* $E(X+a) = E(X) + a$
* $E(c \cdot X) = c \cdot E(X)$
* $E(c \cdot X + a) = c \cdot E(X) + a$


Variancia:

* $X=c$ con prob. 1 $\implies V(X) = 0$
* $V(X+a) = V(X)$
* $V(c \cdot X) = c^2 \cdot V(X)$
* $V(c \cdot X + a) = c^2 \cdot V(X)$

## Distribuciones de probabilidad

*Pr贸ximamente.* 